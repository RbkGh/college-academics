# https://docs.travis-ci.com/user/languages/android
language: android

jdk: oraclejdk8

android:
  components:
  - tools
  - platform-tools
  - build-tools-23.0.3
  - android-23
  - extra-android-m2repository
  - extra-google-google_play_services
  - extra-google-m2repository
  - extra-google-analytics_sdk_v2
  - extra-google-admob_ads_sdk

before_cache:
- rm -f $HOME/.gradle/caches/modules-2/modules-2.lock

cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"

script: "./gradlew build connectedCheck --no-daemon --stacktrace"

sudo: required

deploy:
  provider: releases
  api_key:
    secure: gBRhCAEgi+TK3B2V+C38nuveO61BvS/6XIgFdSDLwxnGeT0w6zXs3wOp9xHlqCn+fZMNQY1UL43/OFcl1dPQaDFRs7xbdUfmNTELepUy4gdoTk3X+YwqycWuqhNEb22LJYmplOp9CJyH5A8diQgmQMioFdL/i5Qn1lNlBRYHt9N4ncNDewxPvwklvTV9At2gw3ciguZrZlXeEwD3GmFrzdjWvIeglOWDi7k+pwx3PxNNCg48/7PwyaAdooSqw9pujd39RsYpRS9x/nlbD748177uD5rUQ2yjFeZBTNGYSsXHoU52kspXGiJUtfoTiVxoQzMUkd2/v7AocmtXHzAbqHf8NdO4KNv3iVlHpMsF060KLaC8GiYhPwsvuchSRkKPYO6MpHViqIdToWdEDhUibVaO3q7vYazQuQ7y5AvOO5UOeqdccNS8+RB7RXctTTE/W26DmGRvSHuteexXz5GV6af/SGVxMbm0rg+vm36bPxyQ2QxEYKBK4fUGnjvVi5Bl6U+dkCY9OdrEchSu4HNcJaFesUtvJyMh+iv5PbBP+uTyi8WPBTRGSVkbdrdaopsiwjlOwXnaMq5FeS1j+29vsHRNWkSPlXqVHhdOfTmrgHRZVIl6zUDe/PVV+wpvj5GxB3AvoCb37si7GISYdswmOpA7gKyz6ZKKxgkuGyj8c74=
  file: "./attendance/build/outputs/apk/attendance-release.apk"
  skip_cleanup: true
  on:
    tags: true
    branch: release

after_deploy: "./gradlew publishRelease --no-daemon --stacktrace"

